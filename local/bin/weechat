#!/bin/bash
# Start the weechat container. I prefer to run weechat in a container so that I
# can maintain config versions between Fedora/macOS.
WEECHAT_HOME="$HOME/.dotfiles/weechat"

weechat_fedora()
{
	podman run -it --mount type=bind,src="$WEECHAT_HOME",dst=/weechat \
		--env=TERM \
		tompreston/weechat "$@"
}

weechat_macos()
{
	docker run -it --mount type=bind,src="$WEECHAT_HOME",dst=/weechat \
		--env=TERM \
		tompreston/weechat "$@"
}

if [ -n "$TMUX" ]; then
	tmux rename-window "weechat"
fi

if [ "$(uname -s)" = "Darwin" ]; then
	weechat_macos "$@"
else
	weechat_fedora "$@"
fi
