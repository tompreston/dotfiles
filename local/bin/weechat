#!/bin/bash
# Sometimes I want to start weechat in a container to track Fedora version.
export WEECHAT_HOME="${WEECHAT_HOME:-$HOME/.dotfiles/weechat}"
WEECHAT="/usr/bin/weechat"

weechat_fedora()
{
	"$WEECHAT" "$@"
}

weechat_macos()
{
	docker run -it --mount type=bind,src="$WEECHAT_HOME",dst=/weechat \
		--env=TERM \
		tompreston/weechat "$@"
}

if [ -n "$TMUX" ]; then
	tmux rename-window "weechat"
fi

if [ "$(uname -s)" = "Darwin" ]; then
	weechat_macos "$@"
else
	weechat_fedora "$@"
fi
